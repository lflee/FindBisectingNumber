<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">
  <title>iron-a11y-keys</title>

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>
  <script src="../../test-fixture/test-fixture-mocha.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="../../polymer/polymer.html">
  <link rel="import" href="../../test-fixture/test-fixture.html">
  <link rel="import" href="../iron-a11y-keys-behavior.html">
</head>
<body>
  <test-fixture id="BasicKeys">
    <template>
      <x-a11y-basic-keys></x-a11y-basic-keys>
    </template>
  </test-fixture>

  <test-fixture id="ComboKeys">
    <template>
      <x-a11y-combo-keys></x-a11y-combo-keys>
    </template>
  </test-fixture>

  <test-fixture id="AlternativeEventKeys">
    <template>
      <x-a11y-alternate-event-keys></x-a11y-alternate-event-keys>
    </template>
  </test-fixture>

  <test-fixture id="BehaviorKeys">
    <template>
      <x-a11y-behavior-keys></x-a11y-behavior-keys>
    </template>
  </test-fixture>

  <script>suite("Polymer.IronA11yKeysBehavior",function(){var e;suiteSetup(function(){var e=[Polymer.IronA11yKeysBehavior,{properties:{keyCount:{type:Number,value:0}},_keyHandler:function(e){this.keyCount++,this.lastEvent=e}}];Polymer({is:"x-a11y-basic-keys",behaviors:[e],keyBindings:{space:"_keyHandler"}}),Polymer({is:"x-a11y-combo-keys",behaviors:[e],keyBindings:{"ctrl+shift+a":"_keyHandler"}}),Polymer({is:"x-a11y-alternate-event-keys",behaviors:[e],keyBindings:{"space:keyup":"_keyHandler"}});var t={keyBindings:{enter:"_keyHandler"}};Polymer({is:"x-a11y-behavior-keys",behaviors:[e,t],keyBindings:{space:"_keyHandler"}})}),suite("basic keys",function(){setup(function(){e=fixture("BasicKeys")}),test("trigger the handler when the specified key is pressed",function(){MockInteractions.pressSpace(e),expect(e.keyCount).to.be.equal(1)}),test("do not trigger the handler for non-specified keys",function(){MockInteractions.pressEnter(e),expect(e.keyCount).to.be.equal(0)}),test("can have bindings added imperatively",function(){e.addOwnKeyBinding("enter","_keyHandler"),MockInteractions.pressEnter(e),expect(e.keyCount).to.be.equal(1),MockInteractions.pressSpace(e),expect(e.keyCount).to.be.equal(2)}),test("can remove imperatively added bindings",function(){e.addOwnKeyBinding("enter","_keyHandler"),e.removeOwnKeyBindings(),MockInteractions.pressEnter(e),expect(e.keyCount).to.be.equal(0),MockInteractions.pressSpace(e),expect(e.keyCount).to.be.equal(1)}),suite("edge cases",function(){test("knows that `spacebar` is the same as `space`",function(){var t=new CustomEvent("keydown");t.key="spacebar",expect(e.keyboardEventMatchesKeys(t,"space")).to.be.equal(!0)})}),suite("matching keyboard events to keys",function(){test("can be done imperatively",function(){var t=new CustomEvent("keydown");t.keyCode=65,expect(e.keyboardEventMatchesKeys(t,"a")).to.be.equal(!0)}),test("can be done with a provided keyboardEvent",function(){var t;MockInteractions.pressSpace(e),t=e.lastEvent,expect(t.detail.keyboardEvent).to.be.okay,expect(e.keyboardEventMatchesKeys(t,"space")).to.be.equal(!0)}),test("can handle variations in arrow key names",function(){var t=new CustomEvent("keydown");t.key="up",expect(e.keyboardEventMatchesKeys(t,"up")).to.be.equal(!0),t.key="ArrowUp",expect(e.keyboardEventMatchesKeys(t,"up")).to.be.equal(!0)})})}),suite("combo keys",function(){setup(function(){e=fixture("ComboKeys")}),test("trigger the handler when the combo is pressed",function(){var t=new CustomEvent("keydown");t.ctrlKey=!0,t.shiftKey=!0,t.keyCode=t.code=65,e.dispatchEvent(t),expect(e.keyCount).to.be.equal(1)})}),suite("alternative event keys",function(){setup(function(){e=fixture("AlternativeEventKeys")}),test("trigger on the specified alternative keyboard event",function(){MockInteractions.keyDownOn(e,32),expect(e.keyCount).to.be.equal(0),MockInteractions.keyUpOn(e,32),expect(e.keyCount).to.be.equal(1)})}),suite("behavior keys",function(){setup(function(){e=fixture("BehaviorKeys")}),test("bindings in other behaviors are transitive",function(){MockInteractions.pressEnter(e),MockInteractions.pressSpace(e),expect(e.keyCount).to.be.equal(2)})})});</script>


</body></html>